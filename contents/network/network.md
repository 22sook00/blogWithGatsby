---
date: "2023-02-04"
title: "네트워크에 대한 이해 기초(1)"
categories: ["network", "cs", "protocol", "web"]
summary: "계층의 이해 그리고 식별자"
thumbnail: "./tcpip.png"
---

# 네트워크에 대한 이해 기초(1)

목차

# 🧩 계층의 이해

### 컴퓨터 구조

컴퓨터는 [ User , Kernel , Hardware ] 세개의 계층으로 크게 나눠진다.

user와 kernel 은 소프트웨어 영역, hardware 는 말그대로 하드웨어 영역을 말한다.

컴퓨터의 세가지 구조를 OSI 7계층으로 나누었던 것을

DoD 라는 개념의 네가지 계층으로도 나눈다.

하드웨어 영역 - Access (접근)

커널 영역 - Transport (전송) / Network (네트워크)

유저 영역 - Application (OSI 7계층에선 HTTP 가 L7에 해당)

어떠한 프로세스가 있다고 가정할때 운영체제 즉, 커널에서는 프로토콜 통신을 구현한다. 이때 TCP/IP 를 구현하는 것이다.

커널이 TCP,IP 로 구현한 것을 유저 영역에 보내주기 위해 파일형태로 추상화 하여 변환하는것을 **소켓** 이라고 한다.

![스크린샷 2023-02-04 오후 5.54.11.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c1c62c45-7f7c-4c27-9282-c1902b4e3106/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-02-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.54.11.png)

<aside>
🧸 **user 영역** 
- 스택영역, 힙영역, 데이터영역, 코드영역
**kernel 영역**
- 시스템의 모든 것을 완전히 통제하기 때문에 사용자(유저모드)가 직접 접근할 수 없으며, 접근 시 system call을 통한 커널모드로의 전환이 필요하다
- 운영체제에 필요한 핵심 기능들은 이 커널이 담당하고 있다. 즉, 리눅스와 같은 운영체제가 설치되어있다는 것은 무조건 커널이 있다는 뜻! 운영체제를 커널로 대체하여 말하기도 한다.

</aside>

### 각 계층의 식별자

각 계층에는 **식별자**가 있다.

`**kernel mode` Transport\*\* 식별자는 Port 번호

- 인터페이스에 대한 식별자
  - 프로세스 / 서비스 / Interface 대답은 관점별로 달라질수 있다.

`**kernel mode` Network\*\* 식별자는 IP주소 (v4,v6 혼재)

- Host 에 대한 식별자
  - Host 란? **인터넷(네트워크) 에** 연결된 컴퓨터 (IP주소를 가진 장치)
  - n개까지 연결가능
  - 컴퓨터하나, NIC 하나에 **여러개의** IP주소를 바인딩 할 수 있다.

**`h/w` Access** 영역의 식별자는 MAC 주소(L2), 하드웨어 주소라고도 한다.

- 네트워크 인터페이스 카드(NIC)에 대한 식별자
  - (유/무선)LAN 카드를 말한다.
  - ex - 노트북하나에 NIC가 두개가 있다면 mac 주소가 **기본적으로 두개**다.
  - 어떤 호스트에 장착된 컴퓨터 부품에 불과함. 자주변경되지 않음.
  - 하드웨어에 박혀있어도 **맥주소는 변경가능하다!**

<aside>
🧸 **Host** 에 대한 식별자는 IP(v4,v6) 주소
**인터페이스** 에 대한 식별자는 Port 번호
**NIC** (lan 카드)에 대한 식별자는 Mac 주소

</aside>

---

# 🧩 Host / Switch / Network 의 관계

![스크린샷 2023-02-04 오후 7.12.31.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/cd75c6d3-86c5-4e3e-947b-4d5160850ffa/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-02-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_7.12.31.png)

### Host

> 네트워크에 **연결된** 컴퓨터, IP주소를 가진 장치

컴퓨터가 네트워크에 연결되어있으면 Host 라고 부른다.

호스트 내부에서 스위치는 네트워크 자체를 이루는 호스트와 네트워크를 이용해주는 이용주체 역할 호스트가 있다.

> 네트워크 자체를 이루는 호스트일 경우

- **Switch** 라고 부른다.
- Router 가 대표적이다.
  - 경로찾기를 위해 스위칭을 한다. 목적자체가 길찾기
    <aside>
    🧸 OSI 7계층을 기준으로, 
    Mac 어드레스를 스위칭 한다면 L2 스위치, (Ethernet / 유선, 802.11~/무선)
    IP 주소를 스위칭 하면 L3 스위치, 
    Port 번호가지고 스위칭한다면 L4 스위치,
    HTTP 통신프로토콜을 스위칭하면 L7 스위칭.
    레이어가 높아질수록 연산도 복잡해지고 비싸진다.

    </aside>

    - 무엇으로 스위칭하는지가 정말 중요하다.
- F/W(방화벽), IPS 가 있다.
  - 이 둘은 보안때문에 스위칭 을 했기때문에 보안스위치라고도 한다.

> 네트워크를 **이용해주는** 이용주체의 호스트

- **End-point** 라고 부른다. (단말) 아.. 단말기가 엔드포인트머신 . 워 ,,
- Server, Client. 이 둘의 개념이 아니라면 Peer라고도 한다.

### Network

> Internet

라우터의 거대한 집합체.

인터넷의 가장 중대한 구성요소는 **라우터**와 **DNS** 이다.

# 🧩 IPv4 주소체계에 대한 암기사항

IP(Internet Protocol) 는 Host의 식별자로, 대한민국 행정체계로 예를들어본다면

개개인은 고유한 주민등록번호로 식별된다.

여기서 대한민국의 행정체계는 네트워크, 개인은 호스트, 주민등록번호는 IP주소로 볼 수 있다.

IP 주소는 주소길이에 따라 종류가 두개로 나누어진다.

### IPv4

가장 일반적으로 사용하는 프로토콜. 주소길이가 **32bit** 인 체계

2의 32제곱으로 대략 43억개로, 인터넷의 호스트의 개수는 43억개로 제한된다.

ex) 192.168.0.8

.을 기준으로 나올수있는 값의 범위는 0~255 (2의 8제곱) 까지이다.

2의 8제곱 ⇒ 8비트, 8비트가 총 4개로 32bit 가 되는 것이다.

즉, IP주소는 8비트씩 끊어서 표시한다.

> Netmask

netmask (0xffffff00, which is hexadecimal for 255.255.255.0),

![스크린샷 2023-02-05 오전 12.09.36.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4113d64d-2cf6-4ed6-9e51-0812c1e63c99/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-02-05_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_12.09.36.png)

맨앞의 숫자 192를 바이너리(2진수)로 계산하면 1100 0000 이라는 숫자가 나온다

![스크린샷 2023-02-05 오전 12.34.41.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7137d6c4-239c-4926-8ed5-e57877cc8b78/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-02-05_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_12.34.41.png)

진법변환 시

8 4 2 1 8 4 2 1

### 1 1 0 0 0 0 0 0

8+4 = 12(c) 0 ⇒16진수는 C0가 된다.

(1인 부분만 더한 합계가 10은 a, 11은 b, 12는 c)

ex) 192.168.60.8

IPv4주소는 네트워크아이디와 호스트아이디로 나뉜다.

그렇다면 네트워크아이디의 길이는 어떻게 될까?

IPv4 는 32비트라고 위에서 말했다. 만약 네트워크아이디가 24라면 호스트아이디는 8비트가 되는것이다.

여기서 네트워크아이디의 길이가 얼만지 나타내는게 (서브)넷마스크이다.

현재 나의 넷마스크는 255.255.255.0 으로 255를 16진수로 나타내면 0F, 2진수로 나타내면 1111 1111 이 나온다.

아까 나온 192의 2진수 1100 0000 과 1111 1111 두개를 **_비트 AND 연산_**을 한다.

AND 연산은 1끼리 결합된것만 1 그대로 보여주기 때문에 1100 0000 으로 리턴된다.

즉, 192.168.60 까지 비트AND 연산값은 동일하다는 뜻이다.

![스크린샷 2023-02-05 오전 12.34.28.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d732eea8-f78b-4f02-ae90-24a8257b3424/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-02-05_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_12.34.28.png)

하지만 마지막 호스트주소인 8 의 이진수는 **0000 1110** 으로 넷마스크 마지막에 해당하는 0000 0000과 비트AND 연산을 하면 0000 0000 이 리턴된다.

192.168.60.0 이 네트워크 아이디가 되는것이다.

192.168.60.14/24 라고 표기된다면 네트워크아이디는 24비트임을 알 수 있다.

### IPv6

주소길이가 **128bit** 인 체계

<aside>
🧸 **mac 에서 ipconfig 확인하는 방법**
윈도우에서는 터미널창에 ipconfig 를 작성하면 현재 나의 IP 주소 및 네트워크 연결사항들을 볼 수 있다. 맥에서는 `ifconfig | grep inet` 로 검색해야 볼 수 있다.
만약 IP 주소만 확인하고 싶다면 `ipconfig getifaddr en0`

</aside>

---

# 📜 참조

**맥에서 ipconfig 확인하기**

[Macintosh Terminal Pocket Guide](https://www.oreilly.com/library/view/macintosh-terminal-pocket/9781449328962/re107.html)

**네트워크 기초이론**
